# Chandra Application

🤖 **This application was auto-generated from specifications**

## 📦 What's Included

### Frontend (ui/)
- **Framework:** Angular 17
- **Screens:** 5
- **Components:** User Management Screen, Resource Management Screen, Community Platform Screen, AI Assistant Screen, Care Provider Portal Screen

### Backend (api/)
- **Framework:** FastAPI
- **Tables:** 5
- **Endpoints:** CRUD operations for all models

### Database (db/)
- **Database:** PostgreSQL
- **Tables:** user_managements, resource_managements, community_platforms, ai_assistants, care_provider_portals
- **Migrations:** Auto-generated SQL

---

## 🚀 Quick Start

### Option 1: Docker Compose (Recommended)

```bash
# Start everything
docker-compose up -d

# Check status
docker-compose ps

# View logs
docker-compose logs -f

# Stop everything
docker-compose down
```

**Access:**
- Frontend: http://localhost:4200
- API: http://localhost:8000/docs
- Database: localhost:5432

---

### Option 2: Local Development

#### 1. Database Setup

```bash
cd db
createdb chandra_dev
psql -d chandra_dev -f migrations/001_initial.sql
```

#### 2. Backend Setup

```bash
cd api
pip install -r requirements.txt

# Set environment variables
export DATABASE_URL="postgresql://postgres:postgres@localhost:5432/chandra_dev"

# Run
uvicorn main:app --reload
```

API will be available at: http://localhost:8000/docs

#### 3. Frontend Setup

```bash
cd ui
npm install
npm start
```

Frontend will be available at: http://localhost:4200

---

## 🏗️ Build & Deploy to AWS

### Prerequisites
- AWS CLI configured
- Docker installed
- Access to ECR repository

### Build UI

```bash
cd ui
./app-build.sh                    # Build Angular app
./docker-build-tag-push.sh        # Build & push Docker image to ECR
./docker-pull-run.sh              # Pull & run from ECR
```

### Build API

```bash
cd api
./docker-build-tag-push.sh        # Build & push Docker image to ECR
./docker-pull-run.sh              # Pull & run from ECR
```

### Deploy All

```bash
./deploy-all.sh
```

---

## 📁 Project Structure

```
chandra-app/
├── ui/                      # Angular frontend
│   ├── src/app/
│   │   ├── components/
│   │   ├── services/
│   │   └── models/
│   ├── Dockerfile
│   ├── nginx.conf
│   └── package.json
│
├── api/                     # FastAPI backend
│   ├── models/              # Pydantic models
│   ├── routers/             # API endpoints
│   ├── database/            # SQLAlchemy models
│   ├── Dockerfile
│   ├── init.sh
│   └── requirements.txt
│
├── db/                      # PostgreSQL database
│   ├── migrations/
│   │   └── 001_initial.sql
│   └── README.md
│
├── docker-compose.yml       # Full stack orchestration
├── deploy-all.sh            # Deploy to AWS
└── README.md
```

---

## 🔧 Configuration

### Environment Variables

**API (.env or init.sh):**
```bash
DATABASE_URL=postgresql://user:pass@host:5432/dbname
ELASTICSEARCH_ENDPOINT=http://localhost:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=changeme
OPENAI_API_KEY=sk-...
```

**UI (environment.ts):**
```typescript
export const environment = {
  production: false,
  apiUrl: 'http://localhost:8000/api'
};
```

---

## 📊 API Documentation

Once the API is running, visit:
- **Swagger UI:** http://localhost:8000/docs
- **ReDoc:** http://localhost:8000/redoc

---

## 🧪 Testing

### Backend Tests
```bash
cd api
pytest
```

### Frontend Tests
```bash
cd ui
npm test
```

---

## 🔄 Regenerating Code

This application was generated from specifications stored in Elasticsearch.

To regenerate after spec changes:

```bash
curl -X POST http://localhost:8015/code-gen/generate-and-deploy \
  -d '{"project_id": "Chandra", "github_org": "expressibleai-customers"}'
```

---

## 📝 License

Auto-generated by Expressible AI Code Generator

---

## 🆘 Support

For issues or questions:
1. Check the logs: `docker-compose logs -f`
2. Review API docs: http://localhost:8000/docs
3. Check database: `psql -d chandra_dev -c "\dt"`
